<!doctype linuxdoc system>

<article>


<title>FBB Packet-radio BBS mini-HOWTO
<author>Miroslav "Misko" Skoric, YT7MPB, 
<tt/m.skoric@eunet.yu/
<date>v1.2, 05 October 2000
<abstract>
<nidx>linux windows nt amateur packet radio</nidx>
This mini-HOWTO covers the installation and use of
the most popular amateur packet-radio BBS 
software FBB. That software works under Linux, DOS
and Windows operating systems. It serves as a
bulletin board system (BBS), a mailbox for
personal messages, a database for various texts,
documents and binary files, a server for small
useful calculations etc. Packet radio is a way of
connecting computers via amateur radio stations.
</abstract>

<sect>INTRODUCTION

<p>
I have been using FBB amateur radio software since
early nineties. It was the time of DOS operating
system, so most of us, system administrators (or, so
called system operators - sysop's), used various 
packet radio software for DOS. Versions of FBB 
packet radio BBS software for DOS, today are 
known as DosFBB. 

<p>
I still administer one DosFBB 
database in the SRV (Amateur Radio Union of 
Vojvodina, a part of SRJ). It is DosFBB v7.00g23
that runs on a 486DX computer with 16 MB of RAM
and Hercules b/w graphics. Since last December,
it runs without any re-boot (excepting some power
failures). Before that, it was a bit tricky to
set up all memory management properly, in order
to avoid "frozen" system. Although this server 
runs under DOS, its "radio clients" don't depend
on that. In fact, users of that DosFBB might run
their client software under DOS, Windows, Linux
or any other operating system that offer amateur
packet radio abilities.

<p>Two years ago, after I got my new box, Pentium 166
with 32 MB of RAM and VGA color graphics, I
switched to a Windows version of FBB (so called
WinFBB). Author of the software, an radio amateur
from France, Jean-Paul F6FBB, made several
versions of WinFBB, including 16 bit variant for 
Windows 3.x and Windows 9x as well as 32 bit variant for
Windows NT. I have run both versions until now 
(at the moment it is WinFBB v7.00g25 under Windows 
NT 4.0). 

<p>The main
difference between DosFBB and WinFBB is that the
second one offers you to do other jobs with your
computer, while FBB is running as just any other
application. Beside that, it is always nice to
copy a text from another application (for example,
from an Internet email) and to paste it into a
packet radio message.

<p>In the mean time, I upgraded my system to the
Celeron 400 MHz with 96 MB of RAM and a big hard
disk that has enough room to try Linux...

<sect>INSTALLATION

<p>
<sect1>How to install X11 (Xwindows) version of LinFBB

<p>
<itemize>

<item>First of all, you should have running Linux
      with a GUI installed. I am fully satisfied
      with Gnome GUI but I suppose that KDE will
      be ok too (or any other GUI available).

<p>
<item>Download or copy LinFBB (the main ftp site
      is <url url="http://ftp.f6fbb.org/" name=
      "ftp.f6fbb.org"> but there are many mirror
      sites too). For example, if you get a file
      like <tscreen><verb>x700e_full.tgz</verb></tscreen> 
      it means that it is X11 version 7.00e and it 
      contains all you need in tgz archive to install 
      the BBS. On the other hand, a name like 
      <tscreen><verb>xd700g_full.tgz</verb></tscreen> 
      means that it is not X11 but daemon version 7.00g
      and it is also complete to unpack. Further,
      <tscreen><verb>x700f01.tgz</verb></tscreen> 
      and <tscreen><verb>x700g.tgz</verb></tscreen> 
      are "upgrades" to any previous "full" package.

<p>
<item>Copy the archive file in <bf>/tmp</bf> directory.

<p>
<item>You have to make a "base" directory where
      your FBB will be installed. For example you
      may type: <bf>mkdir /usr/local/fbb</bf> if you want
      FBB to be there. You have to be logged as
      'root' or 'superuser' to install FBB.

<p>
<item>Then, you should locate yourself in that
      directory: <bf>cd /usr/local/fbb</bf>.

<p>
<item>Now, you should unpack the archive:
      <bf>tar xvzf /tmp/x700b25.tgz</bf> (<-- use the right
      name of the archive here).

<p>
<item>When you finished unpacking the archive,
      you may continue installing the software:
      <bf>./install.sh</bf> is the command for that. The
      setup will ask you for the 'base' directory
      where FBB will be installed. If you chose
      <bf>/usr/local/fbb</bf> again, you will be told that
      such directory already exists and all files
      will be overwritten. It is ok, so you should
      answer yes. If everything is ok, you should
      see on the screen that fbb system 
      directories are created. At the beginning
      of that procedure, program will ask you for
      bbs's callsign, name of the city, QTH 
      locator, your name etc. That details will
      become a part of <bf>/usr/local/fbb/init.srv</bf>
      file. 

<p>
<item>Beside that, you MUST check this file
      <bf>again</bf> manually and fix other details if
      needed (because installation script does
      not fix all parts of init.srv).

<p>
<item>Well, so far - so good. After you checked
      all configuration files, you may start the
      software: <bf>./xfbb.sh</bf> (<-- type this within
      an xterm or something similar). When you
      start FBB for the first time, it will ask
      you to create some files it needs, so you
      should answer yes to the questions.

</itemize>

<p>
<sect1>How to install LinFBB beside WinFBB

<p>
<em>Notice: Folks, you see, at my place, I have a
dual-boot system, consisting of Windows NT and
Linux (each of them having their own partition(s)
and file system). I wanted to have 'independent'
operating systems that won't see each other. So I
made two NT's partitions as NTFS partitions and
rest of the space used Linux as ext2 partitions.
Well, first I have installed WinFBB under NT and
LinFBB under Linux. Both of them worked, but there
was a big "problem": I could not share their
system files. You might say: So, what a big deal.
But, my FBB's should serve as packet forwarding 
stations, so it would be very useful for LinFBB 
to know the point where WinFBB stopped the mail 
exchange last time (and vice versa). </em>
 
<p>
<itemize>

<item>Well, in order to allow both WinFBB under
      Windows NT and LinFBB under Linux to use
      some common files, it is needed to put these
      files in a place both operating systems can
      "see" them. So I do that by re-installing
      WinFBB onto a FAT (FAT16) partition that is
      seen by NT and Linux. The best way to do 
      that is to install a fresh copy of WinFBB on
      a FAT partition and to copy complete old 
      WinFBB from NTFS partition over the fresh 
      installation (whenever you are asked to 
      rewrite existing files, you should answer
      yes).

<p>
<item>When it is finished, you should have a clone
      of the existing old WinFBB, but this time on
      the FAT partition that is visible from under
      Linux. Anyway, you should check if 
      everything is running ok like before.

<p>
<item>It is also recommended to check the file
      tree of WinFBB in order to become more
      familiar with that. The file tree of LinFBB
      is a bit different so it is advisable to
      note those details.

<p>
<item>Some files can't be used as such under both
      operating systems (without some neccesary
      changes). That's why some file names should
      be renamed:

<p>
      <tscreen><verb>init.srv    ->  init_w.srv
      forward.sys ->  forw_w.sys
      port.sys    ->  port_w.sys
      protect.sys ->  prot_w.sys</verb></tscreen>

<p>
      FBB is able to recognize those changes.

<p>
<item>Make a backup of the new WinFBB (I make this
      by copying the whole file structure into
      another Windows partition that won't be
      shared with Linux, like NTFS one).

<p>
<item>Now you should restart your machine and boot
      Linux. Log on as 'root' or make 'su' from a
      user's account.

<p>
<item>Mount a shared FAT directory:
      <bf>mount -t vfat /dev/hda2 /mnt/win</bf>

<p>
<item>Copy LinFBB archive to <bf>/tmp</bf> directory.

<p>
<item>Locate yourself to a 'base' directory:
      <bf>cd /usr/local/fbb</bf> (for example).

<p>
<item>Unpack the archive: <bf>tar xvzf /tmp/filename</bf>.

<p>
<item>Start the installation script <bf>./install.sh</bf>
      and, after asked for the 'base' installation
      directory, chose <bf>/usr/local/fbb</bf>. Doesn't
      matter if the program warns you that such
      directory already exists so existing files
      will be overwritten (by the way, if you
      choose a mounted directory shared with NT,
      many original WinFBB files would be over-
      written by LinFBB files, so after returning 
      to Windows, WinFBB might not be functional
      like before).

<p>
<item>Copy <bf>/usr/local/fbb</bf> to <bf>/mnt/win/fbb</bf> but do
      *not* over-write existing files with new files 
      having the same names.

<p>
<item>Copy <bf>/mnt/win/fbb/init_w.srv</bf> to a file
      <bf>/mnt/win/fbb/init_l.srv</bf> 

<p>
<item>Edit <bf>/mnt/win/fbb/init_l.srv</bf> to what is
      needed for Linux. You may use the existing
      file <bf>/mnt/win/fbb/init.srv</bf> as an example.

<p>
<item>Copy newly edited <bf>/mnt/win/fbb/init_l.srv</bf>
      over the <bf>/mnt/win/fbb/init.srv</bf> (if you do
      not do that, maybe you couldn't start LinFBB
      using <bf>./xfbb.sh</bf> , like me).

<p>
<item>Copy <bf>/mnt/win/fbb/system/port_w.sys</bf> to
      <bf>/mnt/win/fbb/system/port_l.sys</bf> file.

<p>
<item>Edit <bf>/mnt/win/fbb/system/port_l.sys</bf> to
      what is needed for Linux. You may use the
      existing file <bf>/mnt/win/fbb/system/port.sys</bf>
      as an example.

<p>
<item>Edit <bf>/mnt/win/fbb/xfbb.sh</bf> in order to fix
      the right path.

<p>
<item>Ensure that you are in FBB's main directory:
      <bf>cd /mnt/win/fbb</bf> (for example).

<p>
<item>Start the script <bf>./xfbb.sh</bf> to run LinFBB.
      If everything is ok, LinFBB under Linux
      should run with the same parameters as
      WinFBB does under Windows.

</itemize>

<p>
<sect1>How to install Protus password utility

<p>
<em>Notice: Well, I have been using Protus
connection filters for a long time now. At
first, it was version 3.1/1.2 for DosFBB515c
and, later, version 3.3 for Dos/WinFBB700.
I have found Protus as very useful utility
because of its implementation of BBS-to-BBS
forwarding protection using MD2 algorythm.
One of the reasons I am going to cover Protus
in this document is a fact that its author
haven't made a manual in english yet. I keep
trying to translate the original manuals
from spanish into english, but it is a hard
process. Any good 'spanish-to-english'
translator is welcomed to contact me.</em>

<p>
Protus offers several interesting features:

<p>
<itemize>

<item>It can send a presentation message to
      all users, informing about possibility
      to make users' access more safe,

<p>
<item>It can send messages to users who have
      normal access, informing about utility's
      existence,

<p>
<item>It can send messages to users who have no
      valid access (before disconnecting them),

<p>
<item>It can send messages to new users who have
      connected for the first time, informing
      them about the password utility.

<p>
<item>It can send messages to users who entered
      wrong password (before disconnecting them),

<p>
<item>It can inform sysop about quite everything
      related to users' connections (new user on
      the system, unsuccessful connections etc),

<p>
<item>Messages mentioned above could be translated
      into various languages, similar to various
      languages FBB uses,

<p>
<item>Messages mentioned above could be different
      for different BBS ports,

<p>
<item>Protus could be activated/deactivated at various 
      intervals of time using CRON.SYS system file,

<p>
<item>Passwords could be remotely managed, using an
      external server developed by Jose EB5IVB,

<p>
<item>...

</itemize> 

<p>
Let's see what should be done in order to
implement secure access to the FBB packet
radio BBS, using Protus type of <em>c_filter</em>:

<p>
<itemize>

<item>Users of Dos/WinFBB versions of Protus
      already know that it is needed to create a new
      directory <bf>\FBB\PROTUS</bf> where several *.PRT
      files should be placed. In addition, the
      main C_FILT*.DLL files should be copied
      into <bf>\FBB\BIN</bf> as well as a couple of "system",
      i.e. config *.PRT files that are going to be
      within <bf>\FBB\SYSTEM</bf> directory.

<p>
<item>After the sysop has copied all files into
      the proper locations, it is needed to make
      some configuration. The most important files
      are two "system" ones: <tt>CONFIG.PRT</tt> and <tt>USERS.PRT</tt>
      that should be carefully adopted to any
      particular situation. Other *.PRT files will
      work as they are in original, but they might
      be translated because they are originated
      in spanish (those files are just textual
      information that are sent to users who
      connect to the BBS). For your information,
      I usualy don't care much about, because my
      BBS's are so called "open systems". It means
      they work quite normal for all users in the
      same way as they worked before using Protus.
      Only a couple of callsigns have password
      implemented and, when connecting, they know
      what they are doing, so, they don't need
      any additional info. Your mileage may vary.

<p>
<item>So far - so good. When everything mentioned is
      done, you have to restart your FBB in order
      for Protus utility to be activated. In all
      connections to your BBS (including console),
      you should see a line like this: <bf>{PROTUS-4.0}</bf>
      just after a line [FBB-7.00-AB1FHMRX$]. It
      only designates that Protus is active on the
      system. Users of your system who don't have
      their password, connect normally as before.
      Users who's callsigns have password implemented,
      are prompted for password just after connections.

<p>
<item>The author of Protus, Jesus EB5AGF, has made
      several working "modes" of its utility. It
      is possible for users to have various kinds
      of security: a fixed phrase as a password
      (similar when you connect to the Internet
      via telephone line, but this way the phrase
      can be masqueraded within the longer answer);
      a changeable answer to the 5 numbers (just
      like usual FBB sysop's password); a mode
      that uses automatic answer from user's client
      packet programs; implementation of MD2 and
      MD5 algorythms; FBB-to-FBB automatic forward
      protection etc.  

<p>
<item>Well, the situation regarding the position
      of files under LinFBB is somewhat different.
      I have become used to the directory structure
      that DosFBB and WinFBB versions of Protus have
      been using, so I considered that it was enough
      just to copy the same directory structure when
      I wanted to implement Protus under LinFBB. It
      was wrong. After I have pulled out the
      remaining hair, the thing started to work, so
      now I am going to tell you what to do.

<p>
<item>I think I have already told you that I have
      been running here both WinFBB under Windows NT
      and LinFBB under Linux (see also <tt>Linux+WinNT
      mini-HOWTO</tt> and <tt>Lilo mini-HOWTO</tt>). That means
      all Protus stuff has already been installed,
      except Linux executable of <em>c_filter</em> file. I
      put that file into <bf>/fbb/bin</bf> directory and,
      after the next restart of LinFBB, I got the
      info mentioned above: {PROTUS-4.0}. But the
      password protection was not likely to work.
      I was told to make a new directory <bf>/var/ax25/fbb/protus</bf>
      and put *.prt files there. I <em>didn't move</em> *.PRT
      files from <bf>\FBB\PROTUS</bf> but <em>copied</em> them into
      the new location, because I wanted Protus to
      run further under WinFBB as before. The utility
      still didn't want to run, unless I copied 
      <em>also</em> *.PRT files from <bf>\FBB\SYSTEM</bf> to the
      new location (<bf>/var/ax25/fbb/protus</bf>). After I 
      did that, everything became good.

<p>
<item>Well, I suppose, the above info would be
      useful for those of you who intend to run
      both Windows and Linux on the same machine.
      For the majority of LinFBB users, it is only
      important to make <bf>/var/local/fbb/protus</bf> 
      where <em>all</em> *.prt files should be placed. <em>Only</em>
      c_filter executable should go to <bf>/fbb/bin</bf>
      and that's it.

<p>
<item>About FBB-to-FBB protection: *both* partners
      have to install Protus and password for the
      forwarding partner's callsign must be the
      same at *both* sides of the link. The versions
      of Protus don't need to be the same (neither
      the versions of FBB, neither the operating
      systems, HI!). Anyway, MD5 algorythm will only
      work if both parties have Protus 4.x and
      above (I still don't use that, but it is not
      a problem, because my two boxes, DosFBB/Protus3.3 and
      WinFBB/LinFBB/Protus4.0, make all things ok).

<p>
<item>One of the interesting features of Protus is to
      log unsuccessful connections. Due to the 
      <em>different</em> locations of *.prt files here, I have
      separate logs for WinFBB and LinFBB. Those of
      you who are going to run only one version of
      FBB, will have <em>one</em> complete log of connection
      errors, your users make when they try
      connecting your BBS. 

<p>
<item>As it was told earlier, if you implemented
      password protection for only <em>some</em> of your
      users (but not for all of them who connect
      normally) - your system is considered as
      an "open" one. It means that will be logged
      only unsuccessful tries to enter the system
      by "protected" callsigns. But, if you decided
      that your BBS can be accessed by <em>only</em> those
      callsigns who are protected with Protus, it
      means that your system is the "closed" one. 
      Then, there is no way a user could enter your
      FBB unless its callsign has given a password
      within your Protus. Any unauthorized try to
      connect your BBS is logged. In addition,
      you may decide to have a "guest" access or
      a "read-only" as default for some ports as
      well for users who enter the wrong password.
      Many combinations are possible. You could
      even password protect your own FBB console!  

</itemize>  

<sect>FURTHER INFORMATION

<p>
<sect1>Copyright
<p>
<em>Copyright is a source of much and continuous
debate on the LDP mailing list. For more in depth
information please consult the Manifesto at the
</em> <url url="http://www.LinuxDoc.org/"
name="LinuxDoc"> site. 
<em>The purpose of having a license is to allow
appropriate distribution. You can use any license
that meets the Manifesto. What follows is a
boilerplatte license.
</em>
<p>
Copyright (c) 2000 by Miroslav "Misko" Skoric, YT7MPB.
<P>
Please freely copy and distribute (sell or give
away) this document in any format. It is 
requested that corrections and/or comments be
forwarded to the document maintainer. You may
create a derivative work and distribute it
provided that you:

<itemize>
<item>
Send your derivative work (in the most suitable
format such as sgml) to the LDP (Linux 
Documentation Project) or the like for posting
on the Internet. If not the LDP, then let the LDP
know where it is available.
<item>
License the derivative work with this same 
license or use GPL. Include a copyright notice
and at least a pointer to the license used.
<item>
Give due credit to previous authors and major
contributors.
</itemize>

<p>
If you're considering making a derived work other
than a translation, it's requested that you 
discuss your plans with the current maintainer.

<sect1>Disclaimer
<p>

Use the information in this document at your own
risk. I disavow any potential liability of this
document. Use of the concepts, examples, and/or
other content of this document is entirely at
your own risk.

All copyrights are owned by their owners, unless
specifically noted otherwise. Use of a term in
this document should not be regarded as
affecting the validity of any trademark or service
mark.

Naming of particular products or brands should not
be seen as endorsements.

You are strongly recommended to take a backup of
your system before major installation and backups
at regular intervals.

<sect1>News

<p>

This is not the first release of this mini-HOWTO. I
hope to improve it whenever possible. Beside that,
there are other documents that may help you to
use amateur radio stuff on your computer. You may
look for AX.25 (mini-)HOWTO at the same location
where you get FBB mini-HOWTO.

<em>This mini-HOWTO would be improved from time 
to time. If you think that the HOWTO on your 
Linux installation CD is some out-of-date, you
may check for newest release on the Internet. It
could be found within the main <url 
url="http://www.linuxdoc.org/"
name="Linux Documentation Project">
homepage.
</em>

<sect1>Credits
<p>
<em>This version of mini-HOWTO can thanks to:</em>

<tscreen><verb>
Jean-Paul Roubelat, F6FBB, the author of FBB.
Per Olsen, LA6CU, the author of FBB documentation.
Jesus R., EB5AGF, the author of Protus.
</verb></tscreen>


Any comments or suggestions can be mailed to my
email address:
<htmlurl url="mailto:m.skoric@eunet.yu"
name="m.skoric@eunet.yu">.
</article>
