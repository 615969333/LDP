<!doctype linuxdoc system>
  <article>

      <title>SPARC-HOWTO.
<author>Lionel, trollhunter Bouchpan-Lerust-Ju&eacute;ry

 <htmlurl url ="mailto:trollhunter@linuxfr.org" name="&lt;trollhunter@linuxfr.org&gt;">

      <date>v0.0.1 November 2000

<abstract>
The SPARC family of microprocessors is a very good implementation 
of the RISC design,
SPARC based workstations are usually very well engineered products,
thus Linux on SPARC is a 
winning combination both in performance and ease of use. Actually 
this combination is not as widspread as the Linux/x86; this HOWTO
should help you step by step to make an informed decision: try it you will not
regret it.
</abstract>

    <toc>


<sect>Copyright, Disclaimer and Trademarks
<p>
Copyright &copy; 2000 by Lionel, trollhunter Bouchpan-Lerust-Ju&eacute;ry.
 This document may be distributed under the terms set forth in the 
GNU Free Documentation Licence 
<url 
	  url="http://www.gnu.org/copyleft/fdl.txt" 
	  name="http://www.gnu.org/copyleft/fdl.txt"> .

  This documentation is distributed in the hope that it will be useful, but without any warranty. The information in this document is correct to the best of my knowledge, but there's a always a chance I've made some mistakes, so don't follow everything too blindly, especially if it seems wrong. Nothing here should have a detrimental effect on your computer, but just in case I take no responsibility for any damages ocurred 
from the use of the information contained herein.
      <p>
In this document you will encounter some commercial products and
brands. Theses products are cited for information purpose, it is not
an endorsement from the author. The trademarks belong to their respective 
owners.

Permission is granted to copy, distribute and/or modify this document
      under the terms of the GNU Free Documentation License, Version 1.1
      or any later version published by the Free Software Foundation;
      with the Invariant Sections being : 
&quot;Administrativia.&quot;
&quot;Preface.&quot;, 
&quot;SPARC, which one ?&quot;, 
&quot;Buying a SPARC workstation.&quot;, 
&quot;Linux on SPARC: 2 kernels.&quot;, 
&quot;Choosing a distribution.&quot;, 
&quot;Working with the Openboot.&quot;, 
&quot;Hard drive buses.&quot;, 
&quot;CDROM: specific settings.quot;, 
&quot;SILO.&quot;, 
&quot;Keyboard and mouse.&quot;, 
&quot;X Window.&quot;, 
&quot;SMP.&quot;, 
&quot;The sound.&quot;, 
&quot;Serial port.&quot;, 
&quot;Revision History.&quot;, 

  , with the
      Front-Cover Texts being &quot;title&quot; and &quot;abstract.&quot;
, and with no Back-Cover Texts .
      A copy of the license is included in the section entitled "GNU
      Free Documentation License".
<p>
<sect1>GNU Free Documentation Licence.
<p> 
<code>
0. PREAMBLE

The purpose of this License is to make a manual, textbook, or other
written document "free" in the sense of freedom: to assure everyone
the effective freedom to copy and redistribute it, with or without
modifying it, either commercially or noncommercially.  Secondarily,
this License preserves for the author and publisher a way to get
credit for their work, while not being considered responsible for
modifications made by others.

This License is a kind of "copyleft", which means that derivative
works of the document must themselves be free in the same sense.  It
complements the GNU General Public License, which is a copyleft
license designed for free software.

We have designed this License in order to use it for manuals for free
software, because free software needs free documentation: a free
program should come with manuals providing the same freedoms that the
software does.  But this License is not limited to software manuals;
it can be used for any textual work, regardless of subject matter or
whether it is published as a printed book.  We recommend this License
principally for works whose purpose is instruction or reference.


1. APPLICABILITY AND DEFINITIONS

This License applies to any manual or other work that contains a
notice placed by the copyright holder saying it can be distributed
under the terms of this License.  The "Document", below, refers to any
such manual or work.  Any member of the public is a licensee, and is
addressed as "you". 

A "Modified Version" of the Document means any work containing the
Document or a portion of it, either copied verbatim, or with
modifications and/or translated into another language.

A "Secondary Section" is a named appendix or a front-matter section of
the Document that deals exclusively with the relationship of the
publishers or authors of the Document to the Document's overall subject
(or to related matters) and contains nothing that could fall directly
within that overall subject.  (For example, if the Document is in part a
textbook of mathematics, a Secondary Section may not explain any
mathematics.)  The relationship could be a matter of historical
connection with the subject or with related matters, or of legal,
commercial, philosophical, ethical or political position regarding
them.

The "Invariant Sections" are certain Secondary Sections whose titles
are designated, as being those of Invariant Sections, in the notice
that says that the Document is released under this License.

The "Cover Texts" are certain short passages of text that are listed,
as Front-Cover Texts or Back-Cover Texts, in the notice that says that
the Document is released under this License.

A "Transparent" copy of the Document means a machine-readable copy,
represented in a format whose specification is available to the
general public, whose contents can be viewed and edited directly and
straightforwardly with generic text editors or (for images composed of
pixels) generic paint programs or (for drawings) some widely available
drawing editor, and that is suitable for input to text formatters or
for automatic translation to a variety of formats suitable for input
to text formatters.  A copy made in an otherwise Transparent file
format whose markup has been designed to thwart or discourage
subsequent modification by readers is not Transparent.  A copy that is
not "Transparent" is called "Opaque".

Examples of suitable formats for Transparent copies include plain
ASCII without markup, Texinfo input format, LaTeX input format, SGML
or XML using a publicly available DTD, and standard-conforming simple
HTML designed for human modification.  Opaque formats include
PostScript, PDF, proprietary formats that can be read and edited only
by proprietary word processors, SGML or XML for which the DTD and/or
processing tools are not generally available, and the
machine-generated HTML produced by some word processors for output
purposes only.

The "Title Page" means, for a printed book, the title page itself,
plus such following pages as are needed to hold, legibly, the material
this License requires to appear in the title page.  For works in
formats which do not have any title page as such, "Title Page" means
the text near the most prominent appearance of the work's title,
preceding the beginning of the body of the text.


2. VERBATIM COPYING

You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies
to the Document are reproduced in all copies, and that you add no other
conditions whatsoever to those of this License.  You may not use
technical measures to obstruct or control the reading or further
copying of the copies you make or distribute.  However, you may accept
compensation in exchange for copies.  If you distribute a large enough
number of copies you must also follow the conditions in section 3.

You may also lend copies, under the same conditions stated above, and
you may publicly display copies.


3. COPYING IN QUANTITY

If you publish printed copies of the Document numbering more than 100,
and the Document's license notice requires Cover Texts, you must enclose
the copies in covers that carry, clearly and legibly, all these Cover
Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on
the back cover.  Both covers must also clearly and legibly identify
you as the publisher of these copies.  The front cover must present
the full title with all words of the title equally prominent and
visible.  You may add other material on the covers in addition.
Copying with changes limited to the covers, as long as they preserve
the title of the Document and satisfy these conditions, can be treated
as verbatim copying in other respects.

If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.

If you publish or distribute Opaque copies of the Document numbering
more than 100, you must either include a machine-readable Transparent
copy along with each Opaque copy, or state in or with each Opaque copy
a publicly-accessible computer-network location containing a complete
Transparent copy of the Document, free of added material, which the
general network-using public has access to download anonymously at no
charge using public-standard network protocols.  If you use the latter
option, you must take reasonably prudent steps, when you begin
distribution of Opaque copies in quantity, to ensure that this
Transparent copy will remain thus accessible at the stated location
until at least one year after the last time you distribute an Opaque
copy (directly or through your agents or retailers) of that edition to
the public.

It is requested, but not required, that you contact the authors of the
Document well before redistributing any large number of copies, to give
them a chance to provide you with an updated version of the Document.


4. MODIFICATIONS

You may copy and distribute a Modified Version of the Document under
the conditions of sections 2 and 3 above, provided that you release
the Modified Version under precisely this License, with the Modified
Version filling the role of the Document, thus licensing distribution
and modification of the Modified Version to whoever possesses a copy
of it.  In addition, you must do these things in the Modified Version:

A. Use in the Title Page (and on the covers, if any) a title distinct
   from that of the Document, and from those of previous versions
   (which should, if there were any, be listed in the History section
   of the Document).  You may use the same title as a previous version
   if the original publisher of that version gives permission.
B. List on the Title Page, as authors, one or more persons or entities
   responsible for authorship of the modifications in the Modified
   Version, together with at least five of the principal authors of the
   Document (all of its principal authors, if it has less than five).
C. State on the Title page the name of the publisher of the
   Modified Version, as the publisher.
D. Preserve all the copyright notices of the Document.
E. Add an appropriate copyright notice for your modifications
   adjacent to the other copyright notices.
F. Include, immediately after the copyright notices, a license notice
   giving the public permission to use the Modified Version under the
   terms of this License, in the form shown in the Addendum below.
G. Preserve in that license notice the full lists of Invariant Sections
   and required Cover Texts given in the Document's license notice.
H. Include an unaltered copy of this License.
I. Preserve the section entitled "History", and its title, and add to
   it an item stating at least the title, year, new authors, and
   publisher of the Modified Version as given on the Title Page.  If
   there is no section entitled "History" in the Document, create one
   stating the title, year, authors, and publisher of the Document as
   given on its Title Page, then add an item describing the Modified
   Version as stated in the previous sentence.
J. Preserve the network location, if any, given in the Document for
   public access to a Transparent copy of the Document, and likewise
   the network locations given in the Document for previous versions
   it was based on.  These may be placed in the "History" section.
   You may omit a network location for a work that was published at
   least four years before the Document itself, or if the original
   publisher of the version it refers to gives permission.
K. In any section entitled "Acknowledgements" or "Dedications",
   preserve the section's title, and preserve in the section all the
   substance and tone of each of the contributor acknowledgements
   and/or dedications given therein.
L. Preserve all the Invariant Sections of the Document,
   unaltered in their text and in their titles.  Section numbers
   or the equivalent are not considered part of the section titles.
M. Delete any section entitled "Endorsements".  Such a section
   may not be included in the Modified Version.
N. Do not retitle any existing section as "Endorsements"
   or to conflict in title with any Invariant Section.

If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant.  To do this, add their titles to the
list of Invariant Sections in the Modified Version's license notice.
These titles must be distinct from any other section titles.

You may add a section entitled "Endorsements", provided it contains
nothing but endorsements of your Modified Version by various
parties--for example, statements of peer review or that the text has
been approved by an organization as the authoritative definition of a
standard.

You may add a passage of up to five words as a Front-Cover Text, and a
passage of up to 25 words as a Back-Cover Text, to the end of the list
of Cover Texts in the Modified Version.  Only one passage of
Front-Cover Text and one of Back-Cover Text may be added by (or
through arrangements made by) any one entity.  If the Document already
includes a cover text for the same cover, previously added by you or
by arrangement made by the same entity you are acting on behalf of,
you may not add another; but you may replace the old one, on explicit
permission from the previous publisher that added the old one.

The author(s) and publisher(s) of the Document do not by this License
give permission to use their names for publicity for or to assert or
imply endorsement of any Modified Version.

5. COMBINING DOCUMENTS

You may combine the Document with other documents released under this
License, under the terms defined in section 4 above for modified
versions, provided that you include in the combination all of the
Invariant Sections of all of the original documents, unmodified, and
list them all as Invariant Sections of your combined work in its
license notice.

The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy.  If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by
adding at the end of it, in parentheses, the name of the original
author or publisher of that section if known, or else a unique number.
Make the same adjustment to the section titles in the list of
Invariant Sections in the license notice of the combined work.

In the combination, you must combine any sections entitled "History"
in the various original documents, forming one section entitled
"History"; likewise combine any sections entitled "Acknowledgements",
and any sections entitled "Dedications".  You must delete all sections
entitled "Endorsements."


6. COLLECTIONS OF DOCUMENTS

You may make a collection consisting of the Document and other documents
released under this License, and replace the individual copies of this
License in the various documents with a single copy that is included in
the collection, provided that you follow the rules of this License for
verbatim copying of each of the documents in all other respects.

You may extract a single document from such a collection, and distribute
it individually under this License, provided you insert a copy of this
License into the extracted document, and follow this License in all
other respects regarding verbatim copying of that document.



7. AGGREGATION WITH INDEPENDENT WORKS

A compilation of the Document or its derivatives with other separate
and independent documents or works, in or on a volume of a storage or
distribution medium, does not as a whole count as a Modified Version
of the Document, provided no compilation copyright is claimed for the
compilation.  Such a compilation is called an "aggregate", and this
License does not apply to the other self-contained works thus compiled
with the Document, on account of their being thus compiled, if they
are not themselves derivative works of the Document.

If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one quarter
of the entire aggregate, the Document's Cover Texts may be placed on
covers that surround only the Document within the aggregate.
Otherwise they must appear on covers around the whole aggregate.


8. TRANSLATION

Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4.
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections.  You may include a
translation of this License provided that you also include the
original English version of this License.  In case of a disagreement
between the translation and the original English version of this
License, the original English version will prevail.


9. TERMINATION

You may not copy, modify, sublicense, or distribute the Document except
as expressly provided for under this License.  Any other attempt to
copy, modify, sublicense or distribute the Document is void, and will
automatically terminate your rights under this License.  However,
parties who have received copies, or rights, from you under this
License will not have their licenses terminated so long as such
parties remain in full compliance.


10. FUTURE REVISIONS OF THIS LICENSE

The Free Software Foundation may publish new, revised versions
of the GNU Free Documentation License from time to time.  Such new
versions will be similar in spirit to the present version, but may
differ in detail to address new problems or concerns. See
http:///www.gnu.org/copyleft/.

Each version of the License is given a distinguishing version number.
If the Document specifies that a particular numbered version of this
License "or any later version" applies to it, you have the option of
following the terms and conditions either of that specified version or
of any later version that has been published (not as a draft) by the
Free Software Foundation.  If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation.


</code> 



<sect>Administrativia.
<p>
This text is included in the LINUX DOCUMENTATION PROJECT 
<htmlurl 
url="http://www.linuxdoc.org/HOWTO" 
name="http://www.linuxdoc.org/HOWTO"> .
      <p>
The latest version of this document is available in HTML format at
 
<htmlurl
	  url="http://www.theWearables.com/mirrors/SPARC-HOWTO/SPARC-HOWTO.html"
	  name="http://www.theWearables.com/mirrors/SPARC-HOWTO/SPARC-HOWTO.html">
      <p>
If you wish to mirror it or to translate it, please contact me.
      <p>
Lionel, Trollhunter Bouchpan-Lerust-Ju&eacute;ry 
<htmlurl 
url="mailto:trollhunter@linuxfr.org" 
name="&lt;trollhunter@linuxfr.org&gt;">
or at <htmlurl 
url="mailto:boucli27@altavista.net" 
name="&lt;boucli27@altavista.net&gt;">


<sect>Preface.
<p>
This document is a step by step guide meant to 
provide information in order 
to help you running Linux on SPARC based workstations,
As these computers are quite different from PCs there is 
an hardware section, this should help you on understanding, how they
work, what to expect from the various CPUs and models.
<p>
I am not a SPARC specialist, nor a Solaris or Linux guru, I am just
someone who is realy found of well engineered product, and I wish to
help you in choosing your hardware and finding information. Thus I
have tried to write down this document in order to ease your path.
<p> 
I hope this document will help you and you will have a lot of fun
with your SPARC Workstation.
 
<sect>SPARC, which one ?
<p>
We are only dealing with, SPARC based 
workstations, in order to check, just
type <tt>uname -m</tt> command and you should read
something like <tt>sparc4x</tt> where x is blank,c,d,m,u
if the system runs Solaris, or <tt>sparc4</tt> if it runs Linux.
2.2.x
<p>

SARC stands for Scalable Processor ARChitecture,
 it derives from reseatrch done between 1984-1988 
on the  RISC architecture at UC Berkeley.
It exists 3 versions of this archiecture, SPARC-V7, SPARC-V8 
( 32 bits ) and SPARC-V9 ( 64 bits ).
As you are likely to encounter a lot of implementations of
the SPARC architecture, I have summarized the main features
of theses processors.

<sect1>Sun SPARC
<p>
This is quite obsolete, it is an implementation of the 
SPARC-V7 ; its main feature are an Integer unit ( IU ), an external Floating Point Unit ( FPU ),
an unified data + instruction 64KB direct associative cache, and an Memory Managment Unit ( MMU ).
There is a 4 stage pipeline for the integer instructions 
( fetch F, decode D, exec E, update WB )
FPU and IU are synchronized

<sect1>Super SPARC
<p>
This is Texas Instrument and Sun's brainchild, it is usualy found at clok rates around 50Mhz 
featuring up to 1MB L2 cache, it is available both on single and dual processor modules 
( SparcStation 10 and SparcStation 20 ). The higher clock frequency I
have encountered is 60Mhz.
<p>
On a technical point of view this is a SPARC-V8 implementation,
it is a superscalar processor,
having 2 caches, one for instruction the other one for data. 
<itemize>
<item>The 20kB instruction cache is a 5 way associative.
<item>The 16KB data cache is 4 way associative. 
</itemize>

<sect1>Micro SPARC
<p>
This is once again Texas Instrument and Sun's brainchild, you can find
it in the SparcStation Classic, SparcStation LX, at frequency up to
50Mhz. Its derivative the Micro SPARC II can be found in SparcStation
4, SparcStation 5 at frequencies up to 110Mhz.
<p>
On a technical point of view, its main features are a high level of
integration, having 2 caches, one for instructions, the other one for
data.

<itemize>
<item>A 4KB instruction direct associative cache.
<item>A 2KB data direct associative cache.
</itemize> 

It is not possible to had an L2 cache.
If wish to learn more about the MicroSPARC processor you can browse
Sun's 
<htmlurl
url="http://www.sun.com/microelectronics/microSPARC/"
name=" Ultra SPARC"> ressources. 

<sect1>Hyper SPARC
<p>
This processor was manufactured by ROSS, it is usualy found in the 
SparcStation 10, and SparcStation 20, at frequencies up to 150Mhz 
( I have heard of 200Mhz dual processor modules, but Have not
witnessed one yet ). It can be found on single or dual
processor modules.
<p> 
On a technical point of view it is an implementation of the SPARC-V8,
 it is superscalar. It can be found with L2 cache up to 512KB

<sect1>Ultra SPARC
<p>
The Ultra SPARC processor is an extension of the SPARC-V9
architecture, it is a 64 bits processor, it features some video
processing instructions. It is found in all the workstation whose name
start with Ultra.
<p>
The Ultra SPARC II is an improvement of the Ultra SPARC, the 
Ultra SPARCIII is actually the second generation of Ultra SPARC
processors, it was first introduced in the SunBlade 1000 Workstation.
If wish to learn more about the UltraSPARC processors you can browse
Sun's 
<htmlurl
url="http://www.sun.com/microelectronics/UltraSPARC/"
name=" Ultra SPARC"> ressources. 


<p>
You may read the
<htmlurl
url="http://linuxdoc.org/HOWTO/CPU-Design-HOWTO.html"
name="CPU-Design-HOWTO">, this HOWTO has a lot of interesting links
when it comes to studying the CPUs.
<p>
To summarize, the 32 bits workstations are the:
<itemize>
<item>
The sun4 workstation is the 
 sun4/330 model.
<item>
The sun4c workstations are the
SparcStation 1,2, IPC and IPX models.
<item>
The sun4m workstations are the 
 SparcStation 5, 10 and 20. 
</itemize>
Only the SparcStation 10 and SparcStation 20 are SMP
capable: up to 2 CPU modules.

For more information on the SparcStation 5, 10, 20
you can read Sun's
<htmlurl 
url="http://docs.sun.com/ab2/"
name=" documentation ">online or download it available.
<p>
The following model have an 64 bits UltraSPARC
architecture ( sun4u ).
SunUltra 1, 2, 5, 10, 30, 60, 80 and SunBlade 1000.
The SunUltra 2, 60, 80 and SunBlade 1000 are SMP capable, 
with the Ultra 80 and SunBlade 1000 accepting up to 4 CPU modules, 
the SunUltra 2 and 60 accepting only 2 CPU modules.
<p>
The SunBlade 1000 is the latest one featuring Sun's latest marvel
the Ultra III CPU, at a premium price of course.
You can have a summary of the UltraWorkstation still in production
at 
<htmlurl
url="http://www.sun.com/desktop/products/ultrafeatures.html"
name="Sun's"> website.
<p>
A lot of information has been compiled in 
the 
<htmlurl
url="http://www.aceshardware.com/files/sun-hardware-faq.txt"
name="Sun hardware FAQ"> from AcesHardware, 
 or in the 
<htmlurl
url="http://www.sunhelp.org/pages.php?page=info-ref"
name="Sun hardware reference"> from SunHelp


<sect>Buying a SPARC workstation.
<p>
 
You have decided to buy a SPARC based workstation, now you 
can tell what CPU each model sports, but can you tell how that
particuliar model looks like? How its is inside? 
<p>
Do not worry, this section will help you on that topic as well as 
providing you with some hints on how to inspect and test the hardware. 

<sect1>Gaigning a visual familiarity with SPARC hardware
<p> 
PC hardware is everywhere and usualy one is quite 
familiar with it, this is not exactly the case with SPARC based hardware,
even more when it comes to the innards of a workstation. The good news
is that it exists some sites on the web, where you can find pictures
of Sun hardware, with some very detailed shots, thus you should be
able to instantly identify the model and its condition prior to buy it.
The two main site where I usualy go are:
<itemize>
<item> <htmlurl url="http://www.sun.com/"
name="sun ">In Sun's database, you can find technical data as well as 
picture of some of Sun's product, the pictures are crisp, and the
hardware is always at its best, this is technicaly interesting, in
order to compare brand new hardware and the used one that is usualy 
featured on the two sites below.
<item> <htmlurl
url="http://www.black-cube.net/Sun/"
name="HAL"> This site features very detailed pictures of a lot of
hardware, from CPU modules to Servers, even mice. 
<item><htmlurl
url="http://www.obsolyte.com/sunPICS/"
name="obsolyte"> This site has different pictures, it is very useful too.
</itemize>

<sect1>Sun made hardware or clones ?
<p>
On the one hand, it is very easy to find information on Sun hardware, while it can be
difficult to find it for clone systems on the other hand it should be
more fun to work with exotic hardware.

<sect1>Where to buy.
<p>
Of course if you buy first hand hardware everything should be fine, 
but if you decide to go for second hand hardware, you will have to
decide how you want to buy it, and you should be able to test it by yourself.
<p>
Second hand hardware can be brought from Sun as 
refurbished hardware, at auction websites, or in
specialised stores, or directly from companys that upgrade their
hardware.

<sect1>Checklist
<p>
When it comes to second hand hardware one has to be as cautious as
possible about the source, and the condition  of that hardware.
<p>
For the source of the hardware, if you can track it, it is a very good
point. If you can't track it, it is up to you to decide if you trust
the seller or not ( If the seller cannot give you the reference of the
hardwre and if, obviously he/she is clueless about Sun hardware, you
should switch to condition red ).
<p>
Another interesting point is to see if check is accepted as a
payement.
<p>
If you can check the hardware before buying it
then first have a general look at it, search for
cracks, for stains; check the connector's pin. If this first
inspection is OK, then ask to see the inside, look for spills, watch
carefuly the connectors, then if it is OK ask to see it running, 
watch carefully boot messages, issue the <tt>dmesg|more</tt> 
or if it runs Solaris you can issue the <tt>more /var/adm/messages</tt> command,
and also very important listen to your computer, can you hear unusual 
noises? Does it smell OK?. Then enter the OpenBoot by the
<tt>stop+a</tt> command and run some tests ( see the OpenBoot section
).
When you have decided to purchase it, it is very important that you
always make sure that the workstation you are purchasing is the one
you have tested: always keep an eye on it, do not let someone go to
the backoffice with it for example, do not accept to leave without
your workstation.
<p>
Then, when you are at home, recheck it as if it was the first time you
see it. 
If it comes with CDROM drive, try to mount/umount a few CDs 
and read them in order to check that device. If there is a floppy disk
read/write/format a few floppys, this should be a good test.

And, in order to stress it, 
<p>
Of course, it exists tools to automaticaly test the hardware, but 
usualy you do not have them when you need them, thus the script
below relies only on ressources provided by a Linux base system.
<p>

You should run the following script for three days, basicaly it
is going to use the CDROM, floppy and hard drive, and to reboot 
the computer every 3 hours.


<code>
#
# Enter this in the crontab(5)
# run the torture.sh script every 3 hours if possible
#
0 */3 * * * /root/torture.sh
</code>
Where <tt>torture.sh</tt> is 
<code>
#!/bin/sh

# 
# these are for controlling the loops
# the CDLIMITS and FDLIMITS
# are for the CD and FD loops
# 
CPT=1
CDLIMIT=3
FDLIMIT=10

#
# to which devices are
# CDROM and floppy attached
#
CDROM=/dev/sr0
FLOPPY=/dev/fd0

#
# where is the program we
# intend to compile

PATH=/path_to_big_package_to_compile

#
# this section si meant to 
# test the CDROM and floppy drives
# comment what you do not need to
# test

while [ $CPT -le $CDLIMIT ]
do
 #
 # CDROM drive
 #
 
 mount -rt iso9660 $CDROM /cdrom
 find /cdrom -exec cat {} \; >>/dev/null 2>/dev/null &
 umount /cdrom
 CPT=$(($CPT+1))
done
 
 #
 # floppy drive
 #
CPT=1
while [ $CPT -le $FDLIMIT ]
do
 mke2fs -c $FLOPPY >/dev/null 2>&1
 mount -t ext2 $FLOPPY /floppy
 cd /bin/
 cp dd ps echo sh /floppy
 find /floppy -exec cat {} \; >>/dev/null 2>/dev/null &
 umount /floppy
 CPT=$(($CPT+1))
done


#
# The big, intensive 
# compilation
# 

cd $PATH

# 
# now compile
#
make


# 
#
# we remove every .o and every executable
#

find $PATH -name "*.o" -exec rm -f {} \; >/dev/null 2>&1
find $PATH -exec test -x {} \; -exec rm -f {} \; >/dev/null 2>&1

#
# time to reboot
#
reboot 

</code>

Of course you should run this script once in order to know how
much time it takes to complete, this is just an idea on how to
automate things.


<sect>Linux on SPARC: 2 kernels.
<p>
Actually Linux on SPARC architecture comes in two flavors:
<itemize>
<item>A 32 bits kernel for the Sun SPARC, Super SPARC, Micro SPARC and
Hyper SPARC Processors.
<item>A 64 bits kernel for UltraSPARC based workstations.
</itemize>
In both case most applications run in 32 bit ( 32 bit userland ).
There is a comprehensive
<htmlurl
url="http://www.ultralinux.org/faq.html"
name=" FAQ "> on 
<htmlurl
url="http://www.ultralinux.org"
name="UltraLinux">'s website.

<sect>Choosing a distribution.
<p>

You are very lucky, it seems that you can pick the one you like.
In order to help you with this task here are some links, that should
help you to make an informed decision.
<p>
To install Linux on a SPARC based computer, should be strightforward
if you follow the informations provided by your distribution.
 
<sect1>Caldera Open Linux.
<p>

The 2.2 release of OpenLinux for SPARC platform can be downloaded at

<htmlurl
      url="ftp://ftp.openlinux.org/pub/sparclinux/"
      name="ftp://ftp.openlinux.org/pub/sparclinux/">


You can join the mailing list by sending a mail to
<htmlurl url ="mailto:majordomo@openlinux.org" name="&lt;
majordomo@openlinux.org &gt;"> with subscribe sparclinux in the body.

<sect1>Debian GNU/Linux.
<p>
Debian GNU/Linux runs on SPARC platform;
you can find a lot of informations about this port at the
<htmlurl
      url="http://www.debian.org/ports/sparc/"
      name="http://www.debian.org/ports/sparc/"> webpage
 

 
You can join the mailing list by sending a mail to
<htmlurl url ="mailto:debian-sparc-request@lists.debian.org" name="&lt;
debian-sparc-request@lists.debian.org &gt;"> with subscribe as the subject.

<sect1>Linux Mandrake.
<p>

Mandrake corporate server for SPARC can be downloaded at
<htmlurl
      url="ftp://rpmfind.net/linux/Mandrake/iso/corporate-1.0/sparc"
      name="ftp://rpmfind.net/linux/Mandrake/iso/corporate-1.0/sparc">

It consists of two ISOs, the core distribution is the *inst.iso one and
the other one, *ext.iso,  is the extension CD. 

<sect1>RedHat Linux.
<p>

The latest RedHat Linux distriution is the 6.2; you can download it
at 
<htmlurl
      url="ftp://rufus.w3.org/linux/redhat/redhat-6.2/sparc/"
      name="ftp://rufus.w3.org/linux/redhat/redhat-6.2/sparc/"> for example.

The mailing list can be joined by sending a mail at 

<htmlurl url ="mailto:sparc-list-request@redhat.com" name="&lt;
sparc-list-request@redhat.com &gt;"> with subscribe as the subject.

RedHat has announced its intention not to support anymore SPARC Linux in
the future.

<sect1>Slackware Linux.
<p>
This distribution is unsupported at the time of this writting,
and is not available as ISO.
You can download it at 
<htmlurl
      url="ftp://ftp.slackware.com/pub/slackware/unsupported/protopkg/"
      name="ftp://ftp.slackware.com/pub/slackware/unsupported/protopkg/">


<sect1>SuSe Linux.
<p>

The SuSe Linux 7.0 distribution is quite complete, you have 4 ISOs to
download. You can grab it at 
the following URL:
<htmlurl
      url="ftp://ftp.suse.com/pub/suse/sparc"
      name="ftp://ftp.suse.com/pub/suse/sparc">

You can join the mailing list by sending a blank mail to 
<htmlurl url="mailto:suse-sparc-subscribe@suse.com" name="&lt;
suse-sparc-subscribe@suse.com &gt;">

<sect1>TurboLinux.
<p>
<htmlurl url="http://www.turbolinux.com" 
name="TurboLinux ">
Workstation 6.1 for intel ships with a 
SPARC developper release CD.


<sect>Working with the Openboot.
<p>
In this section, I will give you an overview of what is the OpenBoot,
and
you will be given the main commands you need to know in order to test
your hardware and to install Linux.
<sect1>What is the OpenBoot?
<p>

If you are used to PC hardware, you are used to interact with 
its BIOS. SPARC computers have an Openoot, it may seem to be like 
your BIOS, but it is actually far more powerfull. 
The Openoot performs the following tasks:
<itemize>
<item>Testing and initializing the hardware.
<item>Starting the operating System.
<item>Giving you acces to a set of tools to program and to debug it.
</itemize>
The programming language is FCode, if you can program the Forth
langage, you can program it.
<p>
In this section, we will juste use a small set of the OpenBoot's 
capabilities, in order to test hardware and to boot the system.
First you have to enter in the OpenBoot, just hit the <tt>stop</tt>
and <tt>a</tt> keys simultaneously. Then you should see a <tt>ok</tt>
prompt, if instead you see the <tt>&gt;</tt> prompt then type
<tt>n</tt>. Now you can proceed to the next section.
  
<sect1>Diagnostics commands.
<p>
The OpenBoot, gives you a lot of commands to test 
and to gather information about your hardware.
<itemize>

<item><tt>.version</tt> Displays version and date of the startup PROM.
<item><tt>banner</tt> You will see the banner, that is displayed at
power-on. It is useful to gather some data about CPUs.
<item><tt>module-info</tt> This will display the Buses clockspeed,
and processors frequency and amount of cache. 
<item><tt>probe-scsi</tt> This will test all devices connected to the on board
SCSI controler. 
<item><tt>probe-scsi-all</tt> This will test all devices connected to all
the SCSI controlers.
<item><tt>show-devs</tt> This displays all installed and probed devices.
<item><tt>show-sbus</tt> Use this, if you just want to display a list of
installed and probed SBus devices.

<item><tt>test-all</tt> This will test all devices in the
system that have a self test program.
<item><tt>test floppy</tt> If a floppy drive is installed, it will test it
reminding you to have a formated floppy disk inside.
<item><tt>test-memory</tt> If the system <tt>diag-switch?</tt> is set to 
<tt>true</tt>, this will test the memory.
<item><tt>test net</tt> This will test the network interfaces 
<item><tt>watch-aui</tt> This will test the AUI ethernet link.
You will see '.' for good packets and 'X" for bad ones. Strike any key 
to abort.
<item><tt>watch-clock</tt> This will test the real time clock chip, it
will tick once a second. To stop this test strike any key.
<item><tt>watch-net</tt> This will check the network connection ( both
AUI and TP ). You will see '.' for good packets and 'X" for bad
ones. Strike any key to abort.
<item><tt>watch-net-all</tt> This will test all Ethernet interfaces.
You will see '.' for good packets and 'X" for bad ones. Strike any key 
to abort. When you abort one, it will test the next one.
<item><tt>watch-tpe</tt> This will check the TPE ethernet interface.
You will see '.' for good packets and 'X" for bad ones. Strike any key 
to abort.
</itemize> 
<sect1>Boot commands.
<p>
The OpenBoot allows you to boot from various devices, the command
you are the more likely to enter are below.
<itemize>
<item><tt>boot</tt> Boot kernel from default device.
<item><tt>boot cdrom</tt> Boot kernel from CDROM drive, this is the
command you are the more likely to type when installing Linux.
<item><tt>boot net</tt> Boot kernel from network using auto-selected
interface.
<item><tt>boot net-aui</tt> Boot kernel from network using AUI
interface.
<item><tt>boot net-tpe</tt> Boot kernel from network using TPE
interface.
<item><tt>boot tape</tt> Boot default file from tape.
</itemize>
You can  poweroff your workstation, when you are working with the 
OpenBoot : just type <tt>power-off</tt>

For more informations on the OpenBoot you can read it's
<htmlurl
url="http://www.sunworld.com/swol-10-1995/swol-10-openboot.html"
name=" FAQ">
<sect>Hard drive buses.
<p>
Depending on their architecture, the worstations are likely to feature
one of the following hard drive buses.

<sect1>SCSI-SCA.
<p>
An SCSI connector is located at the rear of the Workstation; 
the SCA chanel is found on the internal bus of the SPARC Worstations, it
can be basicaly seen as an SCSI bus that provides power supply and
assigns SCSI ID to the peripherals.

<sect1>EIDE.
<p>
This is found for example in an Ultra 5 or Ultra 10 workstations

<sect1>FC-AL
<p>
It is used by the SunBlade 1000 workstation.

<sect>CDROM: specific settings.
<p>
The easiest way to install linux on SPARC workstation is to use a
CDROM. If your workstation does not have a CDROM you can plug an
external SCSI CDROM drive, but there are two things to do or you
are doomed to fail: 
<itemize>
<item>When you issue the <tt>boot cdrom</tt> command, the CDROM is
mapped to ID6.
<item>Your CDROM player's block size should be setted up on 512.
</itemize>
As a rule of thumb, nearly all CDROM drives can be assigned to ID #6 but be 
carefull about the block size setting. 


<sect>SILO.
<p>
The Sparc Improved Boot LOader ( SILO ), is the boot loader that is
used in the SPARC architecture. It allows you to boot Linux, Solaris
or SunOS. It can load a Linux kernel from ext2, iso9660, UFS or 
ROMFS. From the SILO's README:
<p>
 This is the first attempt at a complete boot loader for Linux
on the Sparc.  Because of the lack of space on the bootblock, we have
to do it in two steps, the first step is a very simple loader based on
Peter Zaitcev's silo (we will call this the first stage loader) which
should fit in 512B and its sole purpose is to load a more
complete bootstrap loader, herein refered to as the second stage boot
loader. The cool thing about the second stage loader we implemented is
that it makes use of the ext2 library (provided with the ext2fs tools) and
some ufs code, and thus allows the loader to access any file on a ext2 fs
and ufs, uses silo.conf, handles gunzipping and a lot of other things.
This is different from Linux/i386 lilo which needs a map for each
kernel. In silo we just keep one map file for the second stage
loader, we don't expect you to be changing the second stage loader on
your daily routine (you can do so, you will just need to use a tool to
reinstall the maps).
<p>
Actually, IMHO it is easier to use than LILO.


<sect>Keyboard and mouse.
<p>
Most of the sun4m workstation have a special connector for the
keyboard. In this case the mouse is connected indifferently to 
left or the right side of the keyboard. Some workstations have a 
PS2 connector, it is very easy to spot the difference. 
The keyboards you are the more likely to encounter are the type4 and type5. 
 

<sect>X Window.
<p>
XFree, usualy, runs fine on theses systems.
The XServer for the Sun hardware should be the Xsun, XsunMono or Xsun24 one.


<sect>SMP.
<p>

AFAIK SMP is supported, and I am sure that ROSS's dual CPU 
modules are supported as you can see by yourself:

<code>

piou@ywing:~ > cat /proc/cpuinfo 
cpu             : ROSS HyperSparc RT625 or RT626
fpu             : ROSS HyperSparc combined IU/FPU
promlib         : Version 3 Revision 2
prom            : 2.25
type            : sun4m
ncpus probed    : 2
ncpus active    : 2
Cpu0Bogo        : 125.33
Cpu1Bogo        : 125.33
MMU type        : ROSS HyperSparc
invall          : 0
invmm           : 0
invrnge         : 0
invpg           : 0
contexts        : 4096
CPU0            : online
CPU1            : online
piou@ywing:~ > 

</code>

If you want to learn more about SMP and Linux you can read the
<htmlurl
url="http://www.linuxdoc.org/HOWTO/SMP-HOWTO.html" 
name="SMP-HOWTO" >
<p>
How does it performs? Well, it is fast, really fast. Some of the java 
Demos can run faster on a dual HyperSparc 125Mhz 128MB ( <tt>ywing</tt> ) than on a dual 
celeron BP6 433@433Mhz 192MB ( <tt>calimero</tt> ). The same applies for the Gimp. When it
comes to compiling <tt>calimero</tt> runs faster than <tt>ywing</tt>. Both computers
running 2.2.16 kernel and <tt>calimero</tt>'s hard disk subsystem is full SCSI.
<p>
One important detail when you plan to have different CPU modules in
your computer is to have the same kind of modules, you cannot mix
SuperSparc and HyperSparc for example, but you can have an odd number
of CPUs, for example 3. They are said to be able to run modules
at different clock speed as written in this article form
<htmlurl
url="http://www.aceshardware.com/Spades/read.php?article_id=76"
name="AcesHardware">
, but I have not witnessed it.  

I plan to upgrade <tt>ywing</tt> to 4 CPU in order to see how the performance
scales.

<sect>The sound.
<p>
The sound is supposed to work under Linux, using the <tt>ioctl</tt> application.
On my SparcStation 20, the sound works fine under Solaris8, but I have not yet managed to hear
anything under Linux ( The Sound of Silence? ).

<sect>Serial port.
<p>
Sun workstations ususaly have 2 serial ports, but 
on sun4m workstation there is usualy only one serial connector at the rear,
you need a special Y cable in order to have access to both ports.


<sect>Revision History.
<p>

<itemize>

<item>November 2000. First release v0.0.1 
</itemize>
</article>


</linuxdoc>
