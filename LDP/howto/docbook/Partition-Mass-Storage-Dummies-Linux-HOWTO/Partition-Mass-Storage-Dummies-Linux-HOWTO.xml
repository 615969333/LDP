<?xml version='1.0' encoding='UTF-8'?><!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN" "http://www.docbook.org/xml/4.2/docbookx.dtd"><article><articleinfo><title>Partition-Mass-Storage-Dummies-Linux-HOWTO</title><revhistory><revision><revnumber>6</revnumber><date>2009-04-05 08:38:51</date><authorinitials>jdd</authorinitials><revremark>adding forgotten HOWTO header for wiki</revremark></revision><revision><revnumber>5</revnumber><date>2009-04-05 08:35:01</date><authorinitials>jdd</authorinitials><revremark>adding link to the Partitions-and-mass-storage-HOWTO</revremark></revision><revision><revnumber>4</revnumber><date>2009-03-30 18:34:19</date><authorinitials>jdd</authorinitials><revremark>remove headers to render to docbook</revremark></revision><revision><revnumber>3</revnumber><date>2009-03-30 18:07:40</date><authorinitials>jdd</authorinitials></revision><revision><revnumber>2</revnumber><date>2009-03-30 17:58:09</date><authorinitials>jdd</authorinitials></revision><revision><revnumber>1</revnumber><date>2009-03-30 17:54:21</date><authorinitials>jdd</authorinitials><revremark>title change from sub page to full page (done with copy/paste)</revremark></revision></revhistory></articleinfo><section><title>Partition-Mass-Storage-Dummies-Linux-HOWTO</title><para>copyright (c) 2009 Jean-Daniel Dodin </para><para>This HOWTO is about partitionning usual mass storage that can be magnetic rotating hard drives or Solid State Drives (SSD - including flash cards or USB keys). </para><para>Writing the Partition HOWTO, I noticed that, as of year 2009, at least, partitionning is very complicated. However, most partitionning tasks can be done very easily with the appropriate tools, so this HOWTO for any people that want to understand the partitionning without going too deeply inside. </para><para>A more complete partition use description can be found on the Partitions-and-mass-storage-HOWTO, <ulink url='http://wiki.tldp.org/Partitions-and-mass-storage-HOWTO#'>available for example here</ulink><!--The macro TableOfContents doesn't work with the DocBook formatter.--> </para></section><section><title>Licence</title><screen><![CDATA[      Permission is granted to copy, distribute and/or modify this
      document under the terms of the GNU Free Documentation License,
      Version 1.2 or any later version published by the Free Software
      Foundation; with no Invariant Sections, no Front-Cover Texts and
      no Back-Cover Texts.  A copy of the license is included in the
      section entitled "GNU Free Documentation License".]]></screen><para><ulink url='http://wiki.tldp.org/LdpWikiDefaultLicence#GNUFreeDocumentationLicense'>GNU Free Documentation License</ulink> </para></section><section><title>Definitions</title><section><title>Disks</title><para>Disks are usually made of rotating plates, read by magnetic heads. Tracks are circular parts of the plates. As we may have several plates, a stack of plate is seen as a cylinder. All the heads are moved at the same time, reading each it's track. All the tracks read at the same time are a cylinder as well. </para><para>Each track is divided as sectors that can be 512 or 4k bytes long. </para><para>So Mass Storage disks are nearly always described as "CHS", that is Cylinders number, Heads number, Sectors by track number, and the product of all these numbers gives the visible disk size. </para><para>However, this have no meaning for SSD and even with true rotating hard drive, the CHS have absolutely no more any meaning! It keeps using only by inertia... so don't worry too much about these numbers, and if possible ignore them. </para></section><section><title>Partitions</title><para>Partition is from "part". A partition is a part of a drive with some special attributes. </para><para>Computers makers seems pretty dumb when seeing how they keep underestimating the possible next disk size, so each year they have to issue a new standard. Disks firmware are buggy, so the software tools have to fix them - and do quite well the job. </para><para>That is to say that understanding fully why the Partitionning tool choose to create the partitions the way they do is very complex. It's explained fully (or mostly) on the Partitions-and-mass-storage-HOWTO, you probably won't read and don't have to now. </para><para>Windows makes little use of partitions. One can install as many Windows version he wants on the same partition (and often do). It may even proove difficult to install Windows on just an other drive on the same computer. </para><para>Nor Unix nor Linux have any such problem. Just on the contrary, Linux <emphasis role='strong'>love</emphasis> to use at least three partitions. This mean you can have as many Linux on your drive as you want, each on it's special part(ition) of the drive, erase the partition without losing your data (backup first is still better) for example. The two main Linux partitions are used for the system ("/" or "root") and the users data ("home"). The third ("swap") is used to add some more memory and is written directly sector by sector by the system. You usually don't even see it. </para></section></section><section><title>Making Room for Linux</title><section><title>Using Windows</title><para>Most of the time, your computer come with a paid Windows. If you are not an experienced Linux User, it's probably better to keep this Windows, just for safety in case you have to show your computer to the vendor tech (If your vendor is Linux fiendly you are lucky!). So you have to make room for your prefered Linux. </para><para>If You have Windows XP, little luck. Most XP computers come with only one partition on the disk and XP don't know how to make it smaller (If you have two, see the next paragraph). What you have to do is to "defragment" the drive (look in disk properties, you will probably have to "verify" the drive first) - if the computer is brand new and never used, this is not necessary. The "defragmentation" makes the work easier for the Linux partitionner. </para><para>If you have Windows Vista, go to Control center, Administration tools, Disk tools to see the actual disk partitionning. If you have luck, may be there is yet a "data" partition. If so, you have just to look where is this partition located and what it's size is. It will be used for Linux. </para><para>If not, clic right on the system disk partition rectangle, you will see a resize option. Use it. Keep some room for Vista (50Gb, for example) and OK, you have now several partitions on your drive. </para><para>If you see in this screen a small partition (usually around 9Gb), be specially cautious. This is the "system restore partition" that holds the Windows Vista (or XP) original system. Your computer manual should explain how to copy this to two DVD's. Do this before any use of your computer. Make notice of the size and place of this partition (it can be at the very beginning of the drive or at the very end), try to not erase it right now. Don't erase it during the computer insurance time. </para></section><section><title>Using Linux</title><para>You, as a dummy Linux user, have better use a very well known Linux Distribution. There are more than a hundred Linux distributions and I don't have used all of them, of course, so I can't be sure some of them couldn't erase your drive if ever you don't understand a question. </para><para>However I'm rather sure Ubuntu, openSUSE, Mandiva, Red Hat Fedora, new Debian can be reasonably safe for a beginner. </para><para>So launch the Linux install. Probably you will have to insert a Cd or DVD and run. May be you will install immediately or launch a live system (Linux working from memory, not from drive), then install froms there. </para><para>Anyway, you will have to answer some basic questions and at a moment you will be asked if you want to keep windows or erase it. Beleive me, keep it for now, it will be easy to remove later. </para><para>At this moment you will be presented a screen with a graphic of the proposed disk partitions. Scan it to verify the Windows partition is not touched - not formatted. It is probably labelled "NTFS" or "Windows". Verify also that the Windows system backup partition is not touched. It may not have any identified label. In some partitionner, the partition table may be called <emphasis>Disklabel</emphasis>. </para><para>You may have to give Linux the name or position of the Vista partition created on the previous step. If your Windows is XP, you will be proposed to shrink the Windows Partition <emphasis role='strong'>this is good</emphasis>. </para><para>Then accept the partitionning sheme your distribution proposes. <emphasis role='strong'>Do not try to be an expert</emphasis>. At install time, no good Linux Partition tool should erase a Windows system partition. If it does, write me, I will include a notice here. </para><para>Modern Linux distributions are perfectly able to resize a Windows partition to make room to Linux. Let some room to Windows, though, if you plan to use it. </para><para>So, in summary, <emphasis role='strong'>trust your Linux install</emphasis>. Most install problems are user's problem, not Linux Distribution problems!! </para><para>Do <emphasis role='strong'>not</emphasis> try "LVM" or "RAID" for your first install. To use these things, read the hole Partitions-and-mass-storage-HOWTO. </para></section></section><section><title>Images of the partitionning tools</title><section><title>Windows XP</title><para>Here you can see the XP tool for partitionning (french version). The partition is the dashed c: rectangle. You can see the contextual menu (right clic) with no resizing - the resizing option can be seen only in the Vista similar menu. </para><informaltable><tgroup cols='1'><colspec colname='col_0'/><tbody><row rowsep='1'><entry colsep='1' rowsep='1'><para><inlinemediaobject><imageobject><imagedata width='500' fileref='images/capture7.jpg'/></imageobject><textobject><phrase>XP partitionning</phrase></textobject></inlinemediaobject></para></entry></row></tbody></tgroup></informaltable><para>If the computer used Windows for a while, you will have to <emphasis>verify</emphasis> and <emphasis>defragment</emphasis> the disk. This is found in the disk context menu, tab "tools". Defragmenting is re-organising the files in the disk. On the picture below, you see a badly fragmented disk. Vertical lines are files. To be able to shrink the partition with the Linux tools, you must have a large blank on the right of the rectangle on the defrag window. Even only one file on the right prevents resizing. </para><para>If you can't resize, you can only backup all your data, make the partitionning (with Parted magic, for example), deleting all the disk, reinstall XP then install Linux. Given you will probably have to reinstall Windows from time to time, you can use this moment to make room for Linux. </para><informaltable><tgroup cols='1'><colspec colname='col_0'/><tbody><row rowsep='1'><entry colsep='1' rowsep='1'><para><inlinemediaobject><imageobject><imagedata width='500' fileref='images/capture11.jpg'/></imageobject><textobject><phrase>Defragmenting</phrase></textobject></inlinemediaobject></para></entry></row></tbody></tgroup></informaltable></section><section><title>Parted Magic</title><para>Parted Magic is a CD or USB key utility extremely usefull if you have to deal with partitions (find it with web search Probably <ulink url='http://partedmagic.com/'/>). It allows repartitonning, resizing of partitions (if possible), and even search for lost partitions if you happen to have trashed your partition table (experts only). Do not confuse Parted Magic (free and open source) with the proprietary program Partition Magic (expensive). </para><para>This tool is by far the more friendly. If you read this HOWTO you are probably not as Dummy as you may think, at least you are curious. So you may have benefits to use Parted magic at least to make one free partition the Linux installer will easily find and use (and certainly repartition again, that's normal). </para><para>Here is the booting screen, you should be able to boot any computer with this CD. </para><informaltable><tgroup cols='1'><colspec colname='col_0'/><tbody><row rowsep='1'><entry colsep='1' rowsep='1'><para><inlinemediaobject><imageobject><imagedata width='500' fileref='images/capture14.jpg'/></imageobject><textobject><phrase>Parted Magic</phrase></textobject></inlinemediaobject></para></entry></row></tbody></tgroup></informaltable><para>You start a graphical screen, as usual. You have icons at the bottom of the screen, clic to use. The partitionning tool is gparted, a very friendly tool. Notice gparted gives you immediately the free space in the Windows partition (the images here is that of a very small disk - only 8Gb). </para><informaltable><tgroup cols='1'><colspec colname='col_0'/><tbody><row rowsep='1'><entry colsep='1' rowsep='1'><para><inlinemediaobject><imageobject><imagedata width='500' fileref='images/capture15.jpg'/></imageobject><textobject><phrase>Parted Magic</phrase></textobject></inlinemediaobject></para></entry></row></tbody></tgroup></informaltable><para>Right clic on the desired partition gives you the needed options. </para><informaltable><tgroup cols='1'><colspec colname='col_0'/><tbody><row rowsep='1'><entry colsep='1' rowsep='1'><para><inlinemediaobject><imageobject><imagedata width='300' fileref='images/capture16.jpg'/></imageobject><textobject><phrase>Parted Magic</phrase></textobject></inlinemediaobject></para></entry></row></tbody></tgroup></informaltable><para>In the resizing window, you can resize with the mouse (moving the partition limit with the mouse), or give a numerical value. </para><informaltable><tgroup cols='1'><colspec colname='col_0'/><tbody><row rowsep='1'><entry colsep='1' rowsep='1'><para><inlinemediaobject><imageobject><imagedata width='500' fileref='images/capture17.jpg'/></imageobject><textobject><phrase>Parted Magic</phrase></textobject></inlinemediaobject></para></entry></row></tbody></tgroup></informaltable><para>Here is a view of a much bigger disk. </para><informaltable><tgroup cols='1'><colspec colname='col_0'/><tbody><row rowsep='1'><entry colsep='1' rowsep='1'><para><inlinemediaobject><imageobject><imagedata width='500' fileref='images/capture19.jpg'/></imageobject><textobject><phrase>Parted Magic</phrase></textobject></inlinemediaobject></para></entry></row></tbody></tgroup></informaltable><para>On the same Parted Magic CD, you have also other tools, like "Testdisk". This one is much less friendly, but also very powerfull (and being so allow easily to destroy your disk). You will be able to use it sometime in the future, not now. </para><informaltable><tgroup cols='1'><colspec colname='col_0'/><tbody><row rowsep='1'><entry colsep='1' rowsep='1'><para><inlinemediaobject><imageobject><imagedata width='500' fileref='images/capture18.jpg'/></imageobject><textobject><phrase>Parted Magic</phrase></textobject></inlinemediaobject></para></entry></row></tbody></tgroup></informaltable></section><section><title>openSUSE</title><para>openSUSE is a friendly Linux Distribution, trying to reduce as much as possible the risk of removing accidentally files on the disk while installing. </para><para>If you insert the openSUSE DVD in your drive when Windows is running, the DVD starts and propose to install Linux. It creates a special Windows starting menu and reboot to the install without any work to do for the user. </para><para>On this first image, openSUSE warns that it's not possible to resize the XP disk, you have to remove it entirely if you want to install Linux. </para><informaltable><tgroup cols='1'><colspec colname='col_0'/><tbody><row rowsep='1'><entry colsep='1' rowsep='1'><para><inlinemediaobject><imageobject><imagedata width='500' fileref='images/capture8.jpg'/></imageobject><textobject><phrase>openSUSE</phrase></textobject></inlinemediaobject></para></entry></row></tbody></tgroup></informaltable><para>After I did quite a long cleaning work (including removing of unusefull files) on the XP disk, from inside XP, the diagnostic is better: </para><informaltable><tgroup cols='1'><colspec colname='col_0'/><tbody><row rowsep='1'><entry colsep='1' rowsep='1'><para><inlinemediaobject><imageobject><imagedata width='500' fileref='images/capture12.jpg'/></imageobject><textobject><phrase>openSUSE</phrase></textobject></inlinemediaobject></para></entry></row></tbody></tgroup></informaltable></section><section><title>Mandriva</title><para>Mandriva is even simpler, the options are to remove Windows or to use part of the drive. </para><informaltable><tgroup cols='1'><colspec colname='col_0'/><tbody><row rowsep='1'><entry colsep='1' rowsep='1'><para><inlinemediaobject><imageobject><imagedata width='500' fileref='images/capture20.jpg'/></imageobject><textobject><phrase>Mandriva</phrase></textobject></inlinemediaobject></para></entry></row></tbody></tgroup></informaltable><para>If you choose this solution, you have a windows to select what part of the disk is for XP, what part for Linux, as usual. </para><informaltable><tgroup cols='1'><colspec colname='col_0'/><tbody><row rowsep='1'><entry colsep='1' rowsep='1'><para><inlinemediaobject><imageobject><imagedata width='500' fileref='images/capture21.jpg'/></imageobject><textobject><phrase>Mandriva</phrase></textobject></inlinemediaobject></para></entry></row></tbody></tgroup></informaltable></section><section><title>Fedora</title><para>Red Hat was the first really handy Linux Distribution, but for many years now, it's no more aimed to John Doe but to professionals (with the associated support and price). It's average user conterpart is Fedoraproject. </para><para>Fedora can be dowloaded as a live CD, you start it (no boot options) and then clic on an icon to begin the installation. </para><para>On the partitionning screen, Fedora give a drop down list of the choices possible, one is resizing (here the french screen) </para><informaltable><tgroup cols='1'><colspec colname='col_0'/><tbody><row rowsep='1'><entry colsep='1' rowsep='1'><para><inlinemediaobject><imageobject><imagedata width='500' fileref='images/capture24.jpg'/></imageobject><textobject><phrase>Fedora</phrase></textobject></inlinemediaobject></para></entry></row></tbody></tgroup></informaltable><para>The following screen is for the size, as usual. </para><informaltable><tgroup cols='1'><colspec colname='col_0'/><tbody><row rowsep='1'><entry colsep='1' rowsep='1'><para><inlinemediaobject><imageobject><imagedata width='500' fileref='images/capture25.jpg'/></imageobject><textobject><phrase>Fedora</phrase></textobject></inlinemediaobject></para></entry></row></tbody></tgroup></informaltable></section><section><title>Ubuntu Desktop</title><para>Ubuntu also have a friendly screen to resize partitions, but one have to go to "manual" to find it, what can be a little scary. </para><informaltable><tgroup cols='1'><colspec colname='col_0'/><tbody><row rowsep='1'><entry colsep='1' rowsep='1'><para><inlinemediaobject><imageobject><imagedata width='500' fileref='images/capture26.jpg'/></imageobject><textobject><phrase>Ubuntu</phrase></textobject></inlinemediaobject></para></entry></row></tbody></tgroup></informaltable><para>It's the "edit" button that allows resizing. Do <emphasis role='strong'>not</emphasis> format the XP main partition! This would erase all the content. </para><informaltable><tgroup cols='1'><colspec colname='col_0'/><tbody><row rowsep='1'><entry colsep='1' rowsep='1'><para><inlinemediaobject><imageobject><imagedata width='500' fileref='images/capture27.jpg'/></imageobject><textobject><phrase>Ubuntu</phrase></textobject></inlinemediaobject></para></entry></row></tbody></tgroup></informaltable></section><section><title>Debian</title><para>Debian is now as pretty as most distributions. The boot menu (first CD) gives more options than many - this is not a live CD. </para><informaltable><tgroup cols='1'><colspec colname='col_0'/><tbody><row rowsep='1'><entry colsep='1' rowsep='1'><para><inlinemediaobject><imageobject><imagedata width='500' fileref='images/capture28.jpg'/></imageobject><textobject><phrase>Debian</phrase></textobject></inlinemediaobject></para></entry></row></tbody></tgroup></informaltable><para>The partitionner. Choices are the same as Ubuntu does (Ubuntu is built upon Debian). </para><informaltable><tgroup cols='1'><colspec colname='col_0'/><tbody><row rowsep='1'><entry colsep='1' rowsep='1'><para><inlinemediaobject><imageobject><imagedata width='500' fileref='images/capture29.jpg'/></imageobject><textobject><phrase>Debian</phrase></textobject></inlinemediaobject></para></entry></row></tbody></tgroup></informaltable><para>"Manual" have the resize option. </para><informaltable><tgroup cols='1'><colspec colname='col_0'/><tbody><row rowsep='1'><entry colsep='1' rowsep='1'><para><inlinemediaobject><imageobject><imagedata width='500' fileref='images/capture30.jpg'/></imageobject><textobject><phrase>Debian</phrase></textobject></inlinemediaobject></para></entry></row></tbody></tgroup></informaltable><para>You have to give a number - no slide, no view of the free space. </para><informaltable><tgroup cols='1'><colspec colname='col_0'/><tbody><row rowsep='1'><entry colsep='1' rowsep='1'><para><inlinemediaobject><imageobject><imagedata width='500' fileref='images/capture31.jpg'/></imageobject><textobject><phrase>Debian</phrase></textobject></inlinemediaobject></para></entry></row></tbody></tgroup></informaltable></section><section><title>Others</title><para>Many Linux distributions are availalble, for example from <ulink url='http://distro.ibiblio.org/pub/linux/distributions/'>ibiblio</ulink>. If any of these distributions uses gparted, it's possible very easily to partition a drive with them, as we could see with Parted magic. Here the example of <emphasis>Puppy</emphasis> Linux. </para><informaltable><tgroup cols='1'><colspec colname='col_0'/><tbody><row rowsep='1'><entry colsep='1' rowsep='1'><para><inlinemediaobject><imageobject><imagedata width='500' fileref='images/capture32.jpg'/></imageobject><textobject><phrase>Puppy</phrase></textobject></inlinemediaobject></para></entry></row></tbody></tgroup></informaltable><para>This distributions may be a bit more difficult to understand, but it installs is extremely low end hardware (256Mb ram for live cd, 2GB Hard drive). </para></section></section></article>