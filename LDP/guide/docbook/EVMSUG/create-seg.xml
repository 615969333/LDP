<chapter id="evmscreateseg"><title>Creating Segments</title>

<para>The following chapter discusses when to use segments and how to create segments using 
different EVMS interfaces.</para>


<sect1 id="whyseg"><title>When to Create a Segment</title>
	<para>A disk can be subdivided into smaller storage objects called disk segments. A segment manager plug-in provides this capability. Another reason for creating disk segments is to maintain compatibility on a dual boot system where the other operating system requires disk partitions. Before creating a disk segment, you must choose a segment manager plug-in to manage the disk and assign 
the segment manager to the disk. An explanation of when and how to assign segment managers can be found in  <xref linkend="evmsassignseg"/>.</para>

</sect1>

<sect1 id="crsegex"><title>Working through an Example</title>
<para> This section provides a detailed explanation of how to create a 
segment with EVMS by providing instructions to help you complete the following task:</para>	



<blockquote><example><title>Create a 100MB egment</title>
<para>Create a 100MB segment from the freespace segment sde_freespace1. This
	freespace segment lies on a drive controlled by the DOS Segment Manager. </para></example></blockquote>	


<sect2 id="guiseg"><title>Using the EVMS GUI</title>
	<para>To create a segment using the GUI, follow the steps below:
	<orderedlist>
		<listitem><para>Select
		<menuchoice>
		<guimenu>Actions</guimenu>
		<guimenuitem>Create</guimenuitem>
		<guimenuitem>Segment</guimenuitem>
		</menuchoice>
		to see a list of segment manager plug-ins.
		</para></listitem>

		<listitem><para>Select
		<guimenuitem>DOS Segment Manager</guimenuitem>.
		Click <guibutton>Next</guibutton>.</para>

		<para>The next dialog window lists
		the free space storage objects suitable for creating
		a new segment.</para></listitem> 

		<listitem><para>Select <filename>sde_freespace1</filename>. Click
		<guibutton>Next</guibutton>. </para>

		<para>The last dialog window
		presents the free space object you
		selected as well as the available
		configuration options for that
		object.</para></listitem>

		<listitem><para>Enter 100 MB. Required fields are denoted by the
		"*" in front of the field description. The DOS Segment
		Manager provides default values, but you might want to change
		some of these values.</para>

		
		<para>After you have filled in
		information for all the required
		fields, the <guibutton>Create</guibutton>
		button becomes available.</para></listitem>

		<listitem><para>Click the
		<guibutton>Create</guibutton>
		button. A window that displays the
		outcome appears. </para>
		</listitem>
	   </orderedlist></para>

</sect2>
			
<!-- Ncurses-->
<sect2 id="ncurseg"><title>Using Ncurses</title>
	<para>To create a segment using the Ncurses, follow the steps below:</para>
	<orderedlist>
	<listitem><para>Press the <keycap>4</keycap>  key
	to switch views.</para></listitem>

	<listitem><para>Scroll down using the
	down arrow key until <guimenuitem>Disk Segments</guimenuitem> is highlighted.
	Press the <keycap>Enter</keycap> key.</para></listitem>

	<listitem><para>Press the <keycap>Enter</keycap> key
	again to display a sub menu on the
	current selection.</para></listitem>

	<listitem><para>Select <guimenuitem>Create a
	New Segment</guimenuitem>. Press the
	<keycap>Enter</keycap> key. You should see a list of segment
	manager plug-ins. </para></listitem>
			
	<listitem><para>Select <guimenuitem>DOS Segment Manager</guimenuitem>. Press the <keycap>Enter</keycap>
	key.</para>

	<para>The next dialog window
	will present a list of free space
	storage objects suitable for creating
	a new segment. </para></listitem>

	<listitem><para>Select <filename>sde_freespace1</filename> by moving to it with the arrow
	keys and then using the <keycap>spacebar</keycap> key
	to select it. After the storage object is selected (it
	is marked by an &quot;X&quot;), press the <keycap>Enter</keycap> key.</para>

	<para>The last dialog window displays the selected freespace object and configuration options
    	available from the plug-in manager. Required fields are denoted by the "*" in front of the field
    	description. The DOS Segment Manager provides default values, but you might want to change some of these
    	values. </para></listitem>

	<listitem><para>Highlight the <guilabel>size field</guilabel> and press the <keycap>spacebar</keycap> key.</para></listitem>

	<listitem><para>At the &quot;::&quot; prompt enter <userinput>100</userinput>. 
	Press the <keycap>Enter</keycap> key. </para> </listitem>


<listitem><para>Check all fields to make sure they were entered appropriately. If the units are displayed as KB, and you desired MB, return to step 7 and enter the value of KB that is equal to the MB value you desired. For example, instead of entering 100 you would enter 102400 (100 x 1024) to convert the KB value to MB. </para></listitem>

	<listitem><para>Once all required values have been completed, press the <keycap>Enter</keycap> key 
	and a results status message will be displayed. </para> </listitem>

	</orderedlist>

	
</sect2>

<!-- CLI-->		   
<sect2 id="cliseg"><title>Using the CLI</title>

	
	<para>To create a data segment from a
	freespace segment, use the
	<command>Create</command> command. The arguments the
	<command>Create</command> command accepts vary
	depending on what is being created.  The first
	argument to the <command>Create</command>
	command indicates what is to be created, which
	in the above example is a segment. The
	remaining arguments are the freespace segment
	to allocate from and a list of options to pass
	to the segment manager. The command to
	accomplish this is:</para>
	
<programlisting>Create: Segment,sde_freespace1, size=100MB</programlisting>
	

<note><title>NOTE</title>
<para>The <command>Allocate</command> command will also work to create a segment. </para></note>
<para>The example above accepts the default values for all options you don't specify. To see the options for this command type:<programlisting>query:plugins,plugin=DosSegMgr,list options</programlisting></para>	
</sect2>

</sect1>

</chapter>










