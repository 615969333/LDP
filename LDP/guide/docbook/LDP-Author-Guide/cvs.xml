<!-- 
	<!DOCTYPE book PUBLIC '-//OASIS//DTD DocBook XML V4.2//EN'>
-->
<appendix id="cvs">
<title>Concurrent Version System (CVS)</title>

&cvs-why;

   <para>
      You can browse the LDP CVS repository via the web at <ulink
        url="http://cvsview.tldp.org/">http://cvsview.tldp.org/</ulink>.
    </para>

    <section id="getaccount">
      <title> Getting a CVS account </title>
      <para> First you'll need to get an account at the LDP's CVS
      Repository. This is pretty much the root directory that is used
      by CVS, with various projects (HOWTOs, guides, etc.)
      created as subdirectories of it. </para>
      <para>Please fill the form:
         <ulink url="http://tldp.org/cvs/">
            http://tldp.org/cvs/</ulink>
      </para>
      <para>During filling the form we want you to inform us about
      your plans.  Among other things, LDP likes to know which HOWTO or other document you maintain.
      </para>
      <para>Your unique
      CVSROOT directory will be created and you'll get an e-mail with
      a response. Remember your password, it will <emphasis>not</emphasis>
     be sent in the email. When you get your response, log into your CVSROOT
      and make sure everything is set up properly. Use either of these
		options:</para>

		<itemizedlist>
			<listitem>
			<para>
			<command>export CVSROOT=:pserver:<replaceable>your_userid</replaceable>@cvs.tldp.org:/cvsroot</command>
      	<command>cvs -d $CVSROOT login</command>
      	</para>
			</listitem>

			<listitem><para>
            <command>cvs 
				-d :pserver:<replaceable>your_userid</replaceable>@cvs.tldp.org:/cvsroot
            login
           </command></para>
			</listitem>
		</itemizedlist>

      <para> (Replace the <replaceable>your_userid</replaceable> with what
      you were sent in the response e-mail). </para>
      <para> You will be asked for your password, and then be given
      access to the CVS Repository in read-write mode. Wait patiently
      while the system tries to log you in. It can often take more
      that 10-20 seconds for the system to either accept (or reject)
      your password. Once you've
      used <command moreinfo="none">cvs login</command> for the first time and have
      been given access to the system, your password is stored in
      <filename moreinfo="none">.cvspass</filename> and you will not
      have to use <command moreinfo="none">cvs login</command>
      again. Just set the CVSROOT with the export command listed above
      and continue on.  If TLDP's CVS server is the only one you work with, you might also add an <command>export <varname>CVSROOT</varname></command> line to your <filename>~/.bashrc</filename> shell confguration file.</para>

      <para>
         You can get the entire repository with: <command>cvs get LDP</command>
		</para>

      <para> Or you can get the source for your own document with:
			<command>cvs get LDP/howto/docbook/YOUR-HOWTO.sgml</command>
			<command>cvs get guide/docbook/YOURGUIDE</command>
		</para>

   <note><para>
      <command>get</command> will add the full directory structure
      from tldp.org on down. Although it doesn't really matter where
      you put these files on your local file system you may not want to
      bury the directories too deeply.
   </para></note>
    </section>

	<section id="usingcvs">
	  <title>Using CVS</title>
	    <para>
		If you need a CVS account or want
		help configuring CVS please read <xref linkend="cvs-brief" />
	    </para>

	<variablelist>
        <title>CVS Commands: a brief reminder</title>

        <varlistentry>
        <term>$Id$</term>
        <listitem><para>
			Automatically insert the date and version directly into the
			document when a document is committed. Example: $Id: cvs.xml,v 1.9
			2002/04/21 09:44:26 serek Exp $
        </para></listitem>
        </varlistentry>


        <varlistentry>
        <term>commit</term>
        <listitem><para>
			This option will upload your changes to the CVS server. If you
			want to bypass the editor screen you can use </para>
			<cmdsynopsis><command>
				cvs <option>commit</option> <option>-m "comment"</option>
			</command></cmdsynopsis>
		
		<note><title>Ready for publication warning</title><para>You must still email <email>submit@en.tldp.org</email> 
			when you are ready to have your changes
			appear on the live site. Your email should include the relative
			path to the file(s) in the LDP CVS tree that you wish to
			update.
        </para></note>
		
		</listitem>
        </varlistentry>

        <varlistentry>
        <term>add</term>
        <listitem><para>
		You can add new files to your CVS repository. These may be image
		files or additional XML files. First check that your HOWTO is in
		its own directory.           You may want to coordinate with the
		people at <email>submit@en.tldp.org</email> to ensure you can
		add graphics or other files to your HOWTO.
		</para>
		
		<para>
			Copy the files you want to add into your local CVS repository
			(where all of your downloaded/working files are). Then:</para> 
		<cmdsynopsis><command>cvs add <replaceable>filename</replaceable></command></cmdsynopsis>
		<para>
			After you've added the files, you still need to <command>commit</command> them to the
			repository (see above).
		</para>
		</listitem>
		</varlistentry>
		</variablelist>
		
		<para>
		If you need to change a file name, you
		still need to use the <command>add</command> command. First remove the copy of the
		file from your local disk. Then remove it from the CVS tree with:
		<command>cvs remove <replaceable>filename</replaceable></command>.
		As with the <command>add</command> command, you need to <command>>commit</command> your
		removed file. Finally, now that the old file has been removed, add
		your new file using the instructions above (first <command>add</command> and then
		<command>commit</command> the additional file).
		</para>
      
		<section id="recovery">
        <title>Recovering old versions</title>
        <para>
          There you are, typing away, when you screw up.  Real bad.
          Doesn't matter what it is, but suffice it to say that you've
          toasted not only the version on your local drive, but
          created a new version on the CVS server.  What you need
          to do is go back in time and resurrect and older
          version of your file.
        </para>
        <para>
          To do this, you'll need to know the version number of the
          file you want to retrieve. <command>cvs diff</command>
          will give a list of revisions if there are differences.  You
          can pick the revision number, subtract one, and that is
          probably the revision you want to look at.
        </para>
        <para>
          The command</para>
<cmdsynopsis><command>cvs -Q update -p -r <replaceable>revision</replaceable>
          <replaceable>filename</replaceable></command></cmdsynopsis>
	  <para>will output to stdout
          the contents of the <replaceable>revision</replaceable> version
          of <replaceable>filename</replaceable>.  You can pipe it to
          <command>more</command> or redirect the output to a file.
          Conveniently, you can redirect stdout to a file called
          <replaceable>filename</replaceable>.  Your local file
          is now the revision you want, and</para>
	<cmdsynopsis><command>cvs update</command></cmdsynopsis>
	  <para>will update the CVS server with the new (old)
          version of <replaceable>filename</replaceable>.
        </para>
      </section>

<section id="cvs-resources">
<title>CVS Resources</title>
    <para> If you're completely new to CVS, there are a few web pages
    you may want to look at which can help you out: </para>

    <itemizedlist>
      <listitem>
        <para> <ulink
        url="http://cvshome.org/docs/blandy.html">http://cvshome.org/docs/blandy.html</ulink>
        </para>
      </listitem>
      <listitem>
        <para> <ulink
        url="http://www.loria.fr/~molli/cvs/doc/cvs_toc.html">http://www.loria.fr/~molli/cvs/doc/cvs_toc.html</ulink></para>
      </listitem>
    </itemizedlist>
</section>
</section>
</appendix>
